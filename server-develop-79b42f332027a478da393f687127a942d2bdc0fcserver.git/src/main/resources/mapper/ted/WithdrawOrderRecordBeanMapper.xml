<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ted.resonance.mapper.WithdrawOrderRecordBeanMapper" >
  <resultMap id="BaseResultMap" type="com.ted.resonance.entity.WithdrawOrderRecordBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="trade_no" property="tradeNo" jdbcType="VARCHAR" />
    <result column="user_id" property="userId" jdbcType="INTEGER" />
    <result column="currency" property="currency" jdbcType="VARCHAR" />
    <result column="amount" property="amount" jdbcType="DECIMAL" />
    <result column="address_to" property="addressTo" jdbcType="VARCHAR" />
    <result column="fee" property="fee" jdbcType="DECIMAL" />
    <result column="fee_currency" property="feeCurrency" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="add_time" property="addTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="auto_approve" property="autoApprove" jdbcType="BIT" />
    <result column="address_from" property="addressFrom" jdbcType="VARCHAR" />
    <result column="tx_id" property="txId" jdbcType="VARCHAR" />
    <result column="type" property="type" jdbcType="VARCHAR" />
    <result column="username" property="username" jdbcType="VARCHAR" />
    <result column="parent_currency" property="parentCurrency" jdbcType="VARCHAR" />
    <result column="operate_time" property="operateTime" jdbcType="TIMESTAMP" />
    <result column="operator_id" property="operatorId" jdbcType="VARCHAR" />
    <result column="contract_address" property="contractAddress" jdbcType="VARCHAR" />
    <result column="token" property="token" jdbcType="BIT" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="memo" property="memo" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, trade_no, user_id, currency, amount, address_to, fee, fee_currency, status, add_time, 
    update_time, auto_approve, address_from, tx_id, type, username, parent_currency, 
    operate_time, operator_id, contract_address, token, remark, memo
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from withdraw_order_record
    where id = #{id,jdbcType=BIGINT}
  </select>

  <select id="selectTradeNo" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List" />
    from withdraw_order_record
    where trade_no = #{tradeNo,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from withdraw_order_record
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.ted.resonance.entity.WithdrawOrderRecordBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into withdraw_order_record (id, trade_no, user_id, 
      currency, amount, address_to, 
      fee, fee_currency, status, 
      add_time, update_time, auto_approve, 
      address_from, tx_id, type, 
      username, parent_currency, operate_time, 
      operator_id, contract_address, token, 
      remark, memo, wallet_id
      )
    values (#{id,jdbcType=BIGINT}, #{tradeNo,jdbcType=VARCHAR}, #{userId,jdbcType=INTEGER}, 
      #{currency,jdbcType=VARCHAR}, #{amount,jdbcType=DECIMAL}, #{addressTo,jdbcType=VARCHAR}, 
      #{fee,jdbcType=DECIMAL}, #{feeCurrency,jdbcType=VARCHAR}, #{status,jdbcType=VARCHAR}, 
      #{addTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}, #{autoApprove,jdbcType=BIT}, 
      #{addressFrom,jdbcType=VARCHAR}, #{txId,jdbcType=VARCHAR}, #{type,jdbcType=VARCHAR}, 
      #{username,jdbcType=VARCHAR}, #{parentCurrency,jdbcType=VARCHAR}, #{operateTime,jdbcType=TIMESTAMP}, 
      #{operatorId,jdbcType=VARCHAR}, #{contractAddress,jdbcType=VARCHAR}, #{token,jdbcType=BIT},
      #{remark,jdbcType=VARCHAR}, #{memo,jdbcType=VARCHAR}, #{walletId,jdbcType=CHAR}
      )
  </insert>
  <insert id="insertSelective" useGeneratedKeys="true" keyProperty="id" parameterType="com.ted.resonance.entity.WithdrawOrderRecordBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into withdraw_order_record
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="tradeNo != null" >
        trade_no,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
      <if test="currency != null" >
        currency,
      </if>
      <if test="amount != null" >
        amount,
      </if>
      <if test="addressTo != null" >
        address_to,
      </if>
      <if test="fee != null" >
        fee,
      </if>
      <if test="feeCurrency != null" >
        fee_currency,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="addTime != null" >
        add_time,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="autoApprove != null" >
        auto_approve,
      </if>
      <if test="addressFrom != null" >
        address_from,
      </if>
      <if test="txId != null" >
        tx_id,
      </if>
      <if test="type != null" >
        type,
      </if>
      <if test="username != null" >
        username,
      </if>
      <if test="parentCurrency != null" >
        parent_currency,
      </if>
      <if test="operateTime != null" >
        operate_time,
      </if>
      <if test="operatorId != null" >
        operator_id,
      </if>
      <if test="contractAddress != null" >
        contract_address,
      </if>
      <if test="token != null" >
        token,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="memo != null" >
        memo,
      </if>
      <if test="walletId != null" >
        wallet_id,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="tradeNo != null" >
        #{tradeNo,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        #{userId,jdbcType=INTEGER},
      </if>
      <if test="currency != null" >
        #{currency,jdbcType=VARCHAR},
      </if>
      <if test="amount != null" >
        #{amount,jdbcType=DECIMAL},
      </if>
      <if test="addressTo != null" >
        #{addressTo,jdbcType=VARCHAR},
      </if>
      <if test="fee != null" >
        #{fee,jdbcType=DECIMAL},
      </if>
      <if test="feeCurrency != null" >
        #{feeCurrency,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="addTime != null" >
        #{addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="autoApprove != null" >
        #{autoApprove,jdbcType=BIT},
      </if>
      <if test="addressFrom != null" >
        #{addressFrom,jdbcType=VARCHAR},
      </if>
      <if test="txId != null" >
        #{txId,jdbcType=VARCHAR},
      </if>
      <if test="type != null" >
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="username != null" >
        #{username,jdbcType=VARCHAR},
      </if>
      <if test="parentCurrency != null" >
        #{parentCurrency,jdbcType=VARCHAR},
      </if>
      <if test="operateTime != null" >
        #{operateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="operatorId != null" >
        #{operatorId,jdbcType=VARCHAR},
      </if>
      <if test="contractAddress != null" >
        #{contractAddress,jdbcType=VARCHAR},
      </if>
      <if test="token != null" >
        #{token,jdbcType=BIT},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="memo != null" >
        #{memo,jdbcType=VARCHAR},
      </if>
      <if test="walletId != null" >
        #{walletId,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ted.resonance.entity.WithdrawOrderRecordBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update withdraw_order_record
    <set >
      <if test="tradeNo != null" >
        trade_no = #{tradeNo,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        user_id = #{userId,jdbcType=INTEGER},
      </if>
      <if test="currency != null" >
        currency = #{currency,jdbcType=VARCHAR},
      </if>
      <if test="amount != null" >
        amount = #{amount,jdbcType=DECIMAL},
      </if>
      <if test="addressTo != null" >
        address_to = #{addressTo,jdbcType=VARCHAR},
      </if>
      <if test="fee != null" >
        fee = #{fee,jdbcType=DECIMAL},
      </if>
      <if test="feeCurrency != null" >
        fee_currency = #{feeCurrency,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=VARCHAR},
      </if>
      <if test="addTime != null" >
        add_time = #{addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="autoApprove != null" >
        auto_approve = #{autoApprove,jdbcType=BIT},
      </if>
      <if test="addressFrom != null" >
        address_from = #{addressFrom,jdbcType=VARCHAR},
      </if>
      <if test="txId != null" >
        tx_id = #{txId,jdbcType=VARCHAR},
      </if>
      <if test="type != null" >
        type = #{type,jdbcType=VARCHAR},
      </if>
      <if test="username != null" >
        username = #{username,jdbcType=VARCHAR},
      </if>
      <if test="parentCurrency != null" >
        parent_currency = #{parentCurrency,jdbcType=VARCHAR},
      </if>
      <if test="operateTime != null" >
        operate_time = #{operateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="operatorId != null" >
        operator_id = #{operatorId,jdbcType=VARCHAR},
      </if>
      <if test="contractAddress != null" >
        contract_address = #{contractAddress,jdbcType=VARCHAR},
      </if>
      <if test="token != null" >
        token = #{token,jdbcType=BIT},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="memo != null" >
        memo = #{memo,jdbcType=VARCHAR},
      </if>
      <if test="walletId != null" >
        wallet_id = #{walletId,jdbcType=CHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ted.resonance.entity.WithdrawOrderRecordBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update withdraw_order_record
    set trade_no = #{tradeNo,jdbcType=VARCHAR},
      user_id = #{userId,jdbcType=INTEGER},
      currency = #{currency,jdbcType=VARCHAR},
      amount = #{amount,jdbcType=DECIMAL},
      address_to = #{addressTo,jdbcType=VARCHAR},
      fee = #{fee,jdbcType=DECIMAL},
      fee_currency = #{feeCurrency,jdbcType=VARCHAR},
      status = #{status,jdbcType=VARCHAR},
      add_time = #{addTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      auto_approve = #{autoApprove,jdbcType=BIT},
      address_from = #{addressFrom,jdbcType=VARCHAR},
      tx_id = #{txId,jdbcType=VARCHAR},
      type = #{type,jdbcType=VARCHAR},
      username = #{username,jdbcType=VARCHAR},
      parent_currency = #{parentCurrency,jdbcType=VARCHAR},
      operate_time = #{operateTime,jdbcType=TIMESTAMP},
      operator_id = #{operatorId,jdbcType=VARCHAR},
      contract_address = #{contractAddress,jdbcType=VARCHAR},
      token = #{token,jdbcType=BIT},
      remark = #{remark,jdbcType=VARCHAR},
      memo = #{memo,jdbcType=VARCHAR},
      wallet_id = #{walletId,jdbcType=CHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>




  <select id="findById" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List"/>
    from withdraw_order_record
    <where>
      id=#{id}
    </where>
  </select>

  <select id="findByTradeNo" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List"/>
    from withdraw_order_record
    <where>
      trade_no=#{tradeNo}
    </where>
  </select>

  <select id="findAll" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List"/>
    from withdraw_order_record
    <where>
      <if test="userId!=null">
        and user_id=#{userId}
      </if>
      <if test="username!=null and username!=''">
        and username=#{username}
      </if>
      <if test="address!=null and address!=''">
        and address_to=#{address}
      </if>
      <if test="tradeNo!=null and tradeNo!=''">
        and trade_no=#{tradeNo}
      </if>
      <if test="txHash!=null and txHash!=''">
        and tx_id=#{txHash}
      </if>

      <if test="status !=null">
        and status in
        <foreach collection="status" item="item" open="(" separator="," close=")">
          #{item}
        </foreach>
      </if>
      <if test="currency !=null and currency!=''">
        and currency=#{currency}
      </if>
      <if test="parentCurrency !=null and parentCurrency!=''">
        and parent_currency=#{parentCurrency}
      </if>
      <if test="from!=null">
        <![CDATA[
                and  add_time>=#{from}
                 ]]>
      </if>
      <if test="to!=null">
        <![CDATA[
                and  add_time<=#{to}
                 ]]>
      </if>
    </where>
    ORDER BY id DESC
  </select>

  <select id="findAddressTo" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List"/>
    from withdraw_order_record
    <where>
      address_to!='' and parent_currency=#{parentCurrency}
    </where>
    limit 1
  </select>
  <update id="updateStatus">
    UPDATE withdraw_order_record
    <set>
      status=#{status},
      <if test="remark!=null and remark!=''">
        remark=#{remark},
      </if>
      <if test="operatorId!=null and operatorId!=''">
        operator_id=#{operatorId},
      </if>
      <if test="operateTime!=null">
        operate_time=#{operateTime},
      </if>
    </set>
    where id=#{id}
  </update>

  <update id="updateStatusAndTx">
        UPDATE withdraw_order_record set status=#{status},tx_id=#{txId},address_from=#{addressFrom} where id=#{id}
    </update>
</mapper>